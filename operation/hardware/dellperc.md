## 00：文章简介

戴尔PowerEdge服务器RAID控制卡的配置，可以使用戴尔提供的多种工具和界面来进行。其中包括H710p板载的PERC BIOS管理界面，生命周期控制器，系统设置，以及OMSA软件等。下面针对不同的使用目的，我们选取推荐的配置工具和界面给大家做个演示。

<!-- more -->


## 01：前言

> 默认情况下，我们可以使用PERC H710p的板载固化配置管理界面进行大多数的功能配置。如果需要重新初始化RAID卡里硬盘的RAID配置信息，我们可以进行下面步骤：
注：下面PERC卡RAID配置信息初始化的演示，我们将清除PERC卡的磁盘阵列信息，但不清除磁盘上实际存放的用户数据。在后面的实验里，我们将演示在原有的硬盘上创建同样的RAID配置，来恢复硬盘上的用户数据。

## 02：进入界面

服务器开机，系统自检，加载到PERC卡自检界面的时候，按<CTRL+R>进入PERC BIOS管理界面

![](https://image.lichunpeng.cn/mweb-linux98/2021/10/27/16353221225235.jpg)

这里，PERC已经创建好了两个RAID阵列：RAID1(Disk ID=0,1)，RAID10(Disk ID=2,3,4,5)
![](https://image.lichunpeng.cn/mweb-linux98/2021/10/27/16353221401256.jpg)
![](https://image.lichunpeng.cn/mweb-linux98/2021/10/27/16353221479512.jpg)
下面，我们将清除PERC卡阵列信息，为重新初始配置所有的硬盘做准备

## 03：清理配置

高亮选中需要管理的PERC卡，按F2，选择弹出菜单里的“Clear Config”
![](https://image.lichunpeng.cn/mweb-linux98/2021/10/27/16353221900080.jpg)
在告警提示窗口里选择“YES”确认
![](https://image.lichunpeng.cn/mweb-linux98/2021/10/27/16353222046069.jpg)
PERC卡磁盘阵列信息清除成功，查看磁盘列表，各个磁盘状态已经变为“Ready”，为后面的配置演示做好了准备
> 注：我们到这步，只清除了RAID的配置信息，没有清除硬盘上的用户数据

![](https://image.lichunpeng.cn/mweb-linux98/2021/10/27/16353222339456.jpg)

## 04：RAID阵列的创建

前一页，我们清除了PERC卡原有的配置信息，硬盘上的用户数据并没有被初始化掉。下面，我们就还有机会可以创建回和原来一样的RAID配置（RAID1+RAID10)，并恢复回原有的用户数据。我们来示范一下（除非故障原因，不建议管理员在生产服务器上做类似的测试）。

### 4.1：RAID阵列的创建
先检查确认硬盘都处于“Ready”状态，高亮选中需要配置的PERC卡，按F2，在弹出菜单里选择“Create New VD”来创建新阵列（这里称为VD: Virtual Disk）
![](https://image.lichunpeng.cn/mweb-linux98/2021/10/27/16353223285285.jpg)


### 4.2：RAID阵列的创建

我们先创建第一个RAID1阵列：在“RAID Level”里选择“RAID-1”，然后在它下面的物理磁盘列表里，选择头两个硬盘(Disk ID=0, 1)做RAID1。我们注意到：我们使用的是2个300Gb的硬盘做RAID1，生成的VD Size还是278.87GB，即一块硬盘左右的空间大小。保留默认的条带与缓存设置，选择OK
![](https://image.lichunpeng.cn/mweb-linux98/2021/10/27/16353223398919.jpg)

### 4.3：数据的提示

系统提示，如果是新创建的RAID阵列，建议在创建后做一次阵列的初始化，这样硬盘上已经存有的用户数据也将会被干净地清除。本示例我们只是想恢复原来清除的RAID配置信息，所以选择OK，接受提示就可以了。如果想做用户数据的清除，请查看RAID阵列的初始化与管理。

![](https://image.lichunpeng.cn/mweb-linux98/2021/10/27/16353223897289.jpg)

### 4.4：继续创建
这样我们就使用和原来一样的两个硬盘ID=00,01，创建好了与原先一样的RAID1阵列。

![](https://image.lichunpeng.cn/mweb-linux98/2021/10/27/16353224014449.jpg)

同样方法，使用原先一样的4块硬盘(Disk ID=2,3,4,5)创建RAID10
![](https://image.lichunpeng.cn/mweb-linux98/2021/10/27/16353224156891.jpg)

![](https://image.lichunpeng.cn/mweb-linux98/2021/10/27/16353224253892.jpg)

![](https://image.lichunpeng.cn/mweb-linux98/2021/10/27/16353224320556.jpg)


这样，原先清除的两个磁盘阵列又被创建回来了。
注：清除PERC卡阵列配置信息后，可以使用同样的磁盘，创建同样的磁盘阵列。如果没有做阵列初始化的话，磁盘上的用户数据还是存在的。本例中，服务器原先安装好的Windows 2008操作系统还保存在硬盘上，马上我们就可以服务器重启，进入操作系统。

## 05：RAID阵列的格式化

如果我们创建RAID阵列的目的是新部署一台服务器，我们建议所有新创建的RAID阵列都应该做初始化操作，这样，硬盘上原有的用户数据将被清除，以便进行后续的系统，软件安装。

我们临时创建了一个新的RAID1阵列，如图（Disk Group:1；Virtual Disks ID:2)，选中该阵列，按F2，在弹出菜单里选择Initialization

![](https://image.lichunpeng.cn/mweb-linux98/2021/10/27/16353225151034.jpg)

选择Start Init将进入阵列初始化，当然，Stop Init可以将初始化过程停止。屏幕右上方可以看到初始化的进度百分比。用户需要等待初始化进程结束，才可以开始使用该阵列。
![](https://image.lichunpeng.cn/mweb-linux98/2021/10/27/16353225291405.jpg)

我们也可以选择Fast Init，我们进入的是后台的阵列初始化过程。这个过程在后台自动进行，对用户是透明的，用户可以重启服务器，可以马上开始使用阵列安装系统及软件。初始化的进程在服务器开机状态下，会继续完成所需的初始化步骤，直至结束。

在阵列初始化结束后，我们还可以对阵列进行检查，这经常是在出现硬件或磁盘告警的时候，确保RAID的完整。

![](https://image.lichunpeng.cn/mweb-linux98/2021/10/27/16353225494654.jpg)

当然，还有删除阵列，如图，就不细说了

![](https://image.lichunpeng.cn/mweb-linux98/2021/10/27/16353225609826.jpg)


